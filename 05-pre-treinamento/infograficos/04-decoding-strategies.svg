<svg width="900" height="800" viewBox="0 0 900 800" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="800" fill="#F8F9FA" rx="16"/>
  <defs>
    <pattern id="dotGrid" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
      <circle cx="2" cy="2" r="1" fill="#DADCE0"/>
    </pattern>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="10" flood-opacity="0.1"/>
    </filter>
  </defs>
  <rect width="900" height="800" fill="url(#dotGrid)" rx="16"/>

  <!-- TÍTULO -->
  <text x="450" y="45" font-family="Google Sans, Roboto, Arial" font-size="24" fill="#202124" text-anchor="middle" font-weight="bold">Estratégias de Decoding: A Escolha do Token</text>
  <text x="450" y="70" font-family="Roboto, Arial" font-size="14" fill="#5F6368" text-anchor="middle">Como o modelo seleciona a saída a partir do Vetor de Probabilidades</text>

  <!-- 1. GREEDY DECODING (TOPO ESQUERDA) -->
  <g transform="translate(50, 120)">
    <rect width="380" height="280" rx="24" fill="#FFFFFF" stroke="#DADCE0" filter="url(#softShadow)"/>
    <text x="190" y="35" font-family="Google Sans, Roboto, Arial" font-size="16" fill="#202124" text-anchor="middle" font-weight="bold">1. Greedy Search (Padrão)</text>
    <text x="190" y="55" font-family="Roboto, Arial" font-size="12" fill="#5F6368" text-anchor="middle">Sempre escolhe o valor máximo (Argmax)</text>
    
    <!-- Distribuição Greedy -->
    <g transform="translate(60, 80)">
      <rect x="0" y="100" width="40" height="40" rx="4" fill="#F1F3F4"/>
      <rect x="50" y="115" width="40" height="25" rx="4" fill="#F1F3F4"/>
      <rect x="100" y="20" width="40" height="120" rx="4" fill="#1A73E8" style="filter: drop-shadow(0 0 8px rgba(26,115,232,0.4))"/> <!-- WINNER -->
      <rect x="150" y="90" width="40" height="50" rx="4" fill="#F1F3F4"/>
      <rect x="200" y="125" width="40" height="15" rx="4" fill="#F1F3F4"/>
      
      <!-- Indicador Winner -->
      <text x="120" y="10" font-family="Material Icons" font-size="16" fill="#1A73E8" text-anchor="middle">check_circle</text>
    </g>
    <text x="190" y="250" font-family="Roboto, Arial" font-size="11" fill="#EA4335" text-anchor="middle" font-weight="bold">Risco: Repetição e loops infinitos</text>
  </g>

  <!-- 2. TEMPERATURE (TOPO DIREITA) -->
  <g transform="translate(470, 120)">
    <rect width="380" height="280" rx="24" fill="#FFFFFF" stroke="#DADCE0" filter="url(#softShadow)"/>
    <text x="190" y="35" font-family="Google Sans, Roboto, Arial" font-size="16" fill="#202124" text-anchor="middle" font-weight="bold">2. Temperature Scaling</text>
    <text x="190" y="55" font-family="Roboto, Arial" font-size="12" fill="#5F6368" text-anchor="middle">Ajusta a "confiança" das probabilidades</text>
    
    <!-- Curva de Temperatura -->
    <g transform="translate(60, 80)">
      <!-- Sharp Distribution (T < 1) -->
      <path d="M 0 140 Q 50 140 100 20 T 200 140" stroke="#1A73E8" stroke-width="2" fill="none" opacity="0.3"/>
      <!-- Flat Distribution (T > 1) -->
      <path d="M 0 100 Q 130 80 260 100" stroke="#FBBC04" stroke-width="3" fill="none" style="filter: drop-shadow(0 0 4px #FBBC04)"/>
      
      <text x="130" y="130" font-family="Roboto, Arial" font-size="11" fill="#E37400" text-anchor="middle" font-weight="bold">Alta Temperatura = Criatividade</text>
    </g>
    <text x="190" y="250" font-family="Roboto, Arial" font-size="11" fill="#5F6368" text-anchor="middle">Modifica os Logits antes do Softmax</text>
  </g>

  <!-- 3. TOP-K SAMPLING (BASE ESQUERDA) -->
  <g transform="translate(50, 430)">
    <rect width="380" height="280" rx="24" fill="#FFFFFF" stroke="#DADCE0" filter="url(#softShadow)"/>
    <text x="190" y="35" font-family="Google Sans, Roboto, Arial" font-size="16" fill="#202124" text-anchor="middle" font-weight="bold">3. Top-K Sampling</text>
    <text x="190" y="55" font-family="Roboto, Arial" font-size="12" fill="#5F6368" text-anchor="middle">Filtra apenas os "K" tokens mais prováveis</text>
    
    <g transform="translate(60, 80)">
      <!-- Tokens Permitidos -->
      <rect x="0" y="40" width="40" height="100" rx="4" fill="#1A73E8"/>
      <rect x="50" y="60" width="40" height="80" rx="4" fill="#1A73E8"/>
      <rect x="100" y="85" width="40" height="55" rx="4" fill="#1A73E8"/>
      
      <!-- Linha de Corte K=3 -->
      <line x1="145" y1="20" x2="145" y2="140" stroke="#EA4335" stroke-width="2" stroke-dasharray="4 2"/>
      <text x="145" y="10" font-family="Google Sans, Roboto, Arial" font-size="10" fill="#EA4335" text-anchor="middle" font-weight="bold">CORTE (K=3)</text>

      <!-- Tokens Bloqueados -->
      <rect x="155" y="110" width="40" height="30" rx="4" fill="#F1F3F4" opacity="0.5"/>
      <rect x="205" y="125" width="40" height="15" rx="4" fill="#F1F3F4" opacity="0.5"/>
    </g>
    <text x="190" y="250" font-family="Roboto, Arial" font-size="11" fill="#1967D2" text-anchor="middle" font-weight="bold">Elimina a cauda longa de erros</text>
  </g>

  <!-- 4. TOP-P NUCLEUS (BASE DIREITA) -->
  <g transform="translate(470, 430)">
    <rect width="380" height="280" rx="24" fill="#FFFFFF" stroke="#DADCE0" filter="url(#softShadow)"/>
    <text x="190" y="35" font-family="Google Sans, Roboto, Arial" font-size="16" fill="#202124" text-anchor="middle" font-weight="bold">4. Top-P (Nucleus)</text>
    <text x="190" y="55" font-family="Roboto, Arial" font-size="12" fill="#5F6368" text-anchor="middle">Seleção baseada na massa de probabilidade</text>
    
    <g transform="translate(60, 80)">
      <!-- O "Núcleo" (Soma acumulada >= P) -->
      <rect x="0" y="20" width="120" height="120" rx="12" fill="#E6F4EA" stroke="#34A853" stroke-width="1.5"/>
      <rect x="15" y="40" width="30" height="100" rx="2" fill="#34A853"/>
      <rect x="55" y="60" width="30" height="80" rx="2" fill="#34A853"/>
      
      <text x="60" y="155" font-family="Google Sans, Roboto, Arial" font-size="11" fill="#137333" text-anchor="middle" font-weight="bold">SOMA &gt;= P (0.9)</text>

      <!-- Fora do Núcleo -->
      <rect x="130" y="110" width="30" height="30" rx="2" fill="#F1F3F4" opacity="0.5"/>
      <rect x="170" y="125" width="30" height="15" rx="2" fill="#F1F3F4" opacity="0.5"/>
    </g>
    <text x="190" y="250" font-family="Roboto, Arial" font-size="11" fill="#137333" text-anchor="middle" font-weight="bold">O conjunto de candidatos é dinâmico</text>
  </g>

</svg>